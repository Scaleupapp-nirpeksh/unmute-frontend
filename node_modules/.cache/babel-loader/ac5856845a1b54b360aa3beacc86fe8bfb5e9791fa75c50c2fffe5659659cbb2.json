{"ast":null,"code":"var _jsxFileName = \"/Users/nirpekshnandan/unmute-frontend/src/pages/Auth/Login.jsx\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button, TextField, Typography, Box, Alert } from '@mui/material';\nimport { AuthLayout } from '../../components/Auth/AuthLayout';\nimport { authStyles } from './authStyles';\nimport OTPInput from '../../components/Auth/OTPInput';\nimport { authService } from '../../services/auth';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const classes = authStyles();\n  const navigate = useNavigate();\n  const {\n    login\n  } = useAuth();\n  const [step, setStep] = useState(1);\n  const [phone, setPhone] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const handleSendOTP = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      await authService.requestOTP(phone);\n      setStep(2);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to send OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleVerifyOTP = async otp => {\n    try {\n      setLoading(true);\n      setError('');\n      const {\n        data\n      } = await authService.verifyOTP(phone, otp);\n      login(data.token, data.user);\n      navigate('/');\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Invalid OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthLayout, {\n    title: \"Welcome Back\",\n    children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"error\",\n      sx: {\n        mb: 2\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }, this), step === 1 ? /*#__PURE__*/_jsxDEV(Box, {\n      component: \"form\",\n      sx: classes.form,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Phone Number\",\n        variant: \"outlined\",\n        value: phone,\n        onChange: e => setPhone(e.target.value),\n        sx: classes.input,\n        placeholder: \"+1 234 567 890\",\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        fullWidth: true,\n        variant: \"contained\",\n        size: \"large\",\n        onClick: handleSendOTP,\n        disabled: loading || !phone,\n        sx: classes.button,\n        children: loading ? 'Sending...' : 'Continue'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      sx: classes.form,\n      children: [/*#__PURE__*/_jsxDEV(OTPInput, {\n        length: 6,\n        onComplete: handleVerifyOTP,\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        sx: {\n          mt: 2,\n          textAlign: 'center'\n        },\n        children: [\"New here? \", /*#__PURE__*/_jsxDEV(Button, {\n          size: \"small\",\n          onClick: () => navigate('/signup'),\n          disabled: loading,\n          children: \"Create account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 23\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"jC/2UdbnO4I0yz2T6S2Te2RZSAA=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useNavigate","Button","TextField","Typography","Box","Alert","AuthLayout","authStyles","OTPInput","authService","useAuth","jsxDEV","_jsxDEV","Login","_s","classes","navigate","login","step","setStep","phone","setPhone","loading","setLoading","error","setError","handleSendOTP","requestOTP","err","_err$response","_err$response$data","response","data","message","handleVerifyOTP","otp","verifyOTP","token","user","_err$response2","_err$response2$data","title","children","severity","sx","mb","fileName","_jsxFileName","lineNumber","columnNumber","component","form","fullWidth","label","variant","value","onChange","e","target","input","placeholder","disabled","size","onClick","button","length","onComplete","mt","textAlign","_c","$RefreshReg$"],"sources":["/Users/nirpekshnandan/unmute-frontend/src/pages/Auth/Login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button, TextField, Typography, Box, Alert } from '@mui/material';\nimport { AuthLayout } from '../../components/Auth/AuthLayout';\nimport { authStyles } from './authStyles';\nimport OTPInput from '../../components/Auth/OTPInput';\nimport { authService } from '../../services/auth';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function Login() {\n  const classes = authStyles();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n  const [step, setStep] = useState(1);\n  const [phone, setPhone] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSendOTP = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      await authService.requestOTP(phone);\n      setStep(2);\n    } catch (err) {\n      setError(err.response?.data?.message || 'Failed to send OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleVerifyOTP = async (otp) => {\n    try {\n      setLoading(true);\n      setError('');\n      const { data } = await authService.verifyOTP(phone, otp);\n      login(data.token, data.user);\n      navigate('/');\n    } catch (err) {\n      setError(err.response?.data?.message || 'Invalid OTP');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AuthLayout title=\"Welcome Back\">\n      {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n      \n      {step === 1 ? (\n        <Box component=\"form\" sx={classes.form}>\n          <TextField\n            fullWidth\n            label=\"Phone Number\"\n            variant=\"outlined\"\n            value={phone}\n            onChange={(e) => setPhone(e.target.value)}\n            sx={classes.input}\n            placeholder=\"+1 234 567 890\"\n            disabled={loading}\n          />\n          \n          <Button\n            fullWidth\n            variant=\"contained\"\n            size=\"large\"\n            onClick={handleSendOTP}\n            disabled={loading || !phone}\n            sx={classes.button}\n          >\n            {loading ? 'Sending...' : 'Continue'}\n          </Button>\n        </Box>\n      ) : (\n        <Box sx={classes.form}>\n          <OTPInput \n            length={6} \n            onComplete={handleVerifyOTP}\n            disabled={loading}\n          />\n          <Typography variant=\"body2\" sx={{ mt: 2, textAlign: 'center' }}>\n            New here? <Button \n              size=\"small\" \n              onClick={() => navigate('/signup')}\n              disabled={loading}\n            >\n              Create account\n            </Button>\n          </Typography>\n        </Box>\n      )}\n    </AuthLayout>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}